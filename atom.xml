<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[KABLAMO]]></title>
  <link href="http://blog.kablamo.org/atom.xml" rel="self"/>
  <link href="http://blog.kablamo.org/"/>
  <updated>2014-02-03T01:14:05+08:00</updated>
  <id>http://blog.kablamo.org/</id>
  <author>
    <name><![CDATA[Eric Johnson]]></name>
    <email><![CDATA[kablamo@kablamo.org]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[I made a Readline cheat sheet]]></title>
    <link href="http://blog.kablamo.org/2014/01/01/readline-cheat-sheet/"/>
    <updated>2014-01-01T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2014/01/01/readline-cheat-sheet</id>
    <content type="html"><![CDATA[<p>Recently Ovid pointed out <a href="http://blogs.perl.org/users/ovid/2014/01/ditching-a-language.html">large projects are much more likely to fail</a>.
I have a few large goals I&rsquo;d like to accomplish.  For example I want to improve
my front end design skills.  Rather than trying to tackle this problem all
at once, I made up a small project for myself.</p>

<p>I created a <a href="http://readline.kablamo.org/emacs.html">Readline cheat sheet</a> and
I was able to complete this project in about a day.  Here are some
of the things I learned:</p>

<ul>
<li><p><strong>Bootstrap</strong> &ndash; I always worry libraries and frameworks like
<a href="http://getbootstrap.com">Bootstrap</a> are overkill and bloat since I only need
a tiny portion of their features.  But its undeniable that I was able to quickly
build a responsive mobile friendly website without needing to worry about the
technical details.</p></li>
<li><p><strong>Readline commands</strong> &ndash; If I had to pick one keyboad shortcut to recommend it
would be <code>Ctrl-r</code> which allows you to search backwards through your
history.  I also like the incremental undo command: <code>Ctrl-_</code>.</p></li>
<li><p><strong>Text::Xslate</strong> &ndash; People keep mentioning
<a href="https://metacpan.org/pod/Text::Xslate">Text::Xslate</a> so I wanted to give it a try.
The docs say its full featured and very fast.  I liked that HTML metacharacters
are escaped by default to avoid cross site scripting attacks.  Also it supports
Template Toolkit syntax.  I didn&rsquo;t find any new killer features, but it was a
pleasure to work with.</p></li>
<li><p><strong>Some new <a href="http://helabs.com.br/blog/2014/01/21/prevent-common-problems-when-writing-css-from-scratch/">CSS tricks</a></strong> &ndash;
The best trick I learned is how to keep my footer at the bottom of the page
even when it has only a few lines of content.</p></li>
</ul>


<p>I was able to practice design, layout, color, and font selection.  And who
knows &mdash; perhaps this project will also drive a tiny bit of traffic to my
github profile and increase my
<a href="http://www.codusoperandi.com/posts/increasing-your-luck-surface-area">luck surface area</a>.</p>

<p>The momentum feels good.  I need to remember to keep my projects small more often.</p>

<p><img src="http://blog.kablamo.org/images/for-posts/2014-02-02.png" width="700" height="424"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[No dessert forever]]></title>
    <link href="http://blog.kablamo.org/2014/01/01/no-dessert-forever/"/>
    <updated>2014-01-01T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2014/01/01/no-dessert-forever</id>
    <content type="html"><![CDATA[<p>For years I have been hearing people say sugar is the new bad thing.  So I
finally got around to reading up on this claim.  Here is what I learned.</p>

<h1>Nutrition</h1>

<p>Food is composed of <strong>carbohydrates, fats, proteins, water, vitamins,</strong> and
<strong>minerals</strong>.  Of course, I sometimes swallow stuff that is not on that list
but the list is comprehensive in the sense that it covers everything my body
needs.  Notice that sugar is not in the list.  My body breaks down carbs and
fats into glucose (sugar) which can be used by my body as energy.</p>

<p>This means sugar has <em>zero</em> nutritional value.  There is no reason to ever
eat any.  Humans do not require sugar.</p>

<p>I have always been smug about the fact that I don&rsquo;t throw away my money on a
caffeine addiction.  But suddenly I realize I have been foolishly spending my
money on sugar.</p>

<h1>No dessert forever</h1>

<p>As part of my long term plan to someday somehow acquire a svelte physique, I
hereby <strong>reject and repudiate</strong> the harmful cultural ritual known as dessert.
The rules are:</p>

<ul>
<li>No dessert forever.  No ice cream, no cake, no pie.</li>
<li>No candy forever.  No free candy or chocolate from the nice people at the office.</li>
<li>No fruit juice forever.</li>
<li>Exceptions

<ul>
<li>85%+ dark chocolate</li>
<li>Honey</li>
<li>Fruit</li>
<li>Small quantities of desserts that I have never had before.</li>
</ul>
</li>
</ul>


<p>Sources:</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Food_energy">Wikipedia: Food energy</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2235907/">Evidence for sugar addiction</a></li>
<li><a href="http://www.health.harvard.edu/newsletters/Harvard_Heart_Letter/2011/September/abundance-of-fructose-not-good-for-the-liver-heart">Abundance of fructose not good for the liver, heart</a></li>
<li><a href="http://nickwinter.net/experiments">Nick Winter</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Salt and pepper - How to encrypt database passwords]]></title>
    <link href="http://blog.kablamo.org/2013/12/18/authen-passphrase/"/>
    <updated>2013-12-18T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/12/18/authen-passphrase</id>
    <content type="html"><![CDATA[<p>To explain how salt and pepper work in encryption, I will walk through a few
scenarios.</p>

<h1>No salt</h1>

<p><strong>Summary for the impatient:</strong>  <em>Using no salt means an attacker doesn&rsquo;t need
to generate a rainbow table because they can reuse an existing one.</em></p>

<p>If an attacker obtains my database of encrypted passwords it will be very time
consuming to brute force them.  However there exist pre-computed tables of
encrypted values of thousands of commonly used passwords.  These tables are called
rainbow tables.  It is computationally inexpensive to match the encrypted
values in a rainbow table with the encrypted values in my database.</p>

<h1>One salt</h1>

<p><strong>Summary for the impatient:</strong>  <em>Using the same salt for all your passwords
means an attacker must generate 1 rainbow table.</em></p>

<p>Salt is data used as an additional input to the algorthim that encrypts a
password.  If I use a salt when I encrypt a password the resulting output will
be different from someone who did not use the same salt.  That means my
attacker cannot reuse an existing rainbow table.  They must generate a new one
using the same salt I used.</p>

<p>Note that salt is usually stored as plain text in the database with the
encrypted passwords.  So the attacker usually has access to the salt.  Even so,
I have successfully made the attack more expensive.</p>

<h1>A random salt per password</h1>

<p><strong>Summary for the impatient:</strong>  <em>Using a random salt for each password means an
attacker must generate 1 rainbow table per password.</em></p>

<p>Instead of using a single salt for the entire database I can use a different
(random) salt for each user&rsquo;s password.  This means the attacker must generate
a set of rainbow tables for each password which is even more expensive.</p>

<p>Note that I also need to store the salt for each password I have generated.
This is a pain to do manually.  Happily some clever person came up with RFC
2307 which suggests a much simpler solution.</p>

<p>Instead of storing the just the encrypted password in the password column, store
a string which concatenates the salt and the encrypted password.  This may not
sound easier.  It implies the need to parse and concatenate strings.  However
this is handled for me by the encryption libraries so its 100% pain free.  Lets
see an example.</p>

<p>To encrypt the plaintext string &lsquo;pie&rsquo; use the following Perl code</p>

<pre><code>my $blowfish = Authen::Passphrase::BlowfishCrypt-&gt;new(
   passphrase  =&gt; 'pie',
   salt_random =&gt; 1,
   cost        =&gt; 16,
);

say $blowfish-&gt;as_rfc2307; 
# the output will look like this:
# {CRYPT}$2a$14$sS80d1JlF3oR6Q4UHT.9w.DIXnV0/dLQMoVBsOp2gMRT65bWvP0P2
</code></pre>

<p>That crazy <em>{CRYPT}$2a$blarblar</em> mumbo jumbo is what we will save to the db in the password
column.  However if I know what to look for, I can see the mumbo jumbo is actually
several things smushed together:</p>

<pre><code>{CRYPT} $ 2a $ 16 $ sS80d1JlF3oR6Q4UHT.9w.DIXnV0/dLQMoVBsOp2gMRT65bWvP0P2
</code></pre>

<ul>
<li><strong>{CRYPT}</strong> &ndash; This is the scheme identifier.  It indicates which scheme is being used
so I know how to parse the rest of the string.</li>
<li><strong>$</strong> &ndash; These are field separators</li>
<li><strong>2a</strong> &ndash; A version number for this scheme</li>
<li><strong>16</strong> &ndash; The cost</li>
<li>Then there is the <strong>salt</strong> (22 base 64 digits &mdash; plain text)</li>
<li>Followed by the <strong>encrypted password</strong> (31 base 64 digits)</li>
</ul>


<p>To check if a user has submitted a valid <code>$password</code>  use the following code</p>

<pre><code>my $secret   = ''{CRYPT}$2a$16$sS80d1JlF3oR6Q4UHT.9w.DIXnV0/dLQMoVBsOp2gMRT65bWvP0P2';
my $blowfish = Authen::Passphrase-&gt;from_rfc2307($secret);

if ($blowfish-&gt;match($password)) {
    say "You may enter";
}
else {
    say "You did not say the magic word";
}
</code></pre>

<p>Of course we want to build this into our ORM so the Authen::Passphrase objects
are inflated and deflated for us.  Here is what that looks like in a DBIx
Result class:</p>

<pre><code>__PACKAGE__-&gt;load_components(qw/FilterColumn/);
__PACKAGE__-&gt;filter_column( password =&gt; {
    filter_to_storage   =&gt; sub { $_[1]-&gt;as_rfc2307() },                      # deflate
    filter_from_storage =&gt; sub { Authen::Passphrase-&gt;from_rfc2307($_[1]) },  # inflate
});
</code></pre>

<p>But I only showed you that so you would understand what
DBIx::Class::InflateColumn::Authen::Passphrase does under the covers.  I use
that because it makes my code simpler:</p>

<pre><code>__PACKAGE__-&gt;load_components(qw/InflateColumn::Authen::Passphrase/);
__PACKAGE__-&gt;add_columns(
    ...,
    password =&gt; {
        data_type          =&gt; 'text',
        inflate_passphrase =&gt; 'rfc2307',
    },
    ...,
);
</code></pre>

<p>This is how I encrypt passwords on <a href="https://networthify.com">networthify.com</a>
and <a href="http://iijo.org">iijo.org</a>.</p>

<h1>Adding pepper</h1>

<p><strong>Summary for the impatient:</strong>  <em>Using pepper means an attacker must generate
many rainbow tables per password. But few people use pepper and its
controversial.</em></p>

<p>Pepper is the same as salt except that I don&rsquo;t save the value anywhere.  Lets
say I choose an 8 bit value for my pepper.  That means there are 256
possible values.  If I don&rsquo;t save that value anywhere then when a user logs
in I will need to try up to 256 values to see if the user has the right
password.  However it means my attacker will need to generate up to 256
rainbow tables for each password.</p>

<p>One big problem is that trying 256 possible values is going to take me about 4
minutes on average hardware.</p>

<p>Even if I ignore that issue, this option is controversial and my understanding
is that few people do it.  It is generally accepted that messing about with
salt and pepper should be left to the professionals who are writing the
encryption libraries.  Pepper is not supported by Authen::Passphrase.</p>

<h1>Caveats</h1>

<p>Salting is done to make rainbow tables inneffective.  For various reasons
crackers rarely use rainbow tables anymore.  Instead they use sophisticated
brute force algorithms which combine dictionary attacks with databases of known
or commonly used passwords.  These kinds of brute force attacks can often crack
battery-horse-staple <a href="http://xkcd.com/936/">XKCD</a> style passwords even if they
are very long.  Password are not secure unless they are very long <em>and</em>
very random.</p>

<p>And there is more bad news.  While salting makes it harder to crack all the
passwords in the database, cracking a single targeted password is often not
computationally hard.  A single completely random 8 character password can be
cracked with brute force in 10 days.</p>

<p>The only way to protect your users is to require very long and very random
passwords.  Make sure your website requires a minimum password length of 8
characters or more.</p>

<h4>Sources</h4>

<ul>
<li><a href="http://www.wired.co.uk/news/archive/2013-05/28/password-cracking/viewall">Anatomy of a hack: even your &lsquo;complicated&rsquo; password is easy to crack</a> (Wired magazine)</li>
<li><a href="https://metacpan.org/pod/Authen::Passphrase">Authen::Passphrase</a></li>
<li><a href="https://metacpan.org/pod/Authen::Passphrase::BlowfishCrypt">Authen::Passphrase::BlowfishCrypt</a></li>
<li><a href="https://metacpan.org/pod/DBIx::Class::InflateColumn::Authen::Passphrase">DBIx::Class::InflateColumn::Authen::Passphrase</a></li>
<li><a href="http://blog.afoolishmanifesto.com/archives/1910">frew</a></li>
<li><a href="http://crypto.stackexchange.com/questions/1776/can-you-help-me-understand-what-a-cryptographic-salt-is">crypto.stackexchange.com</a></li>
<li><a href="http://security.stackexchange.com/questions/3272/password-hashing-add-salt-pepper-or-is-salt-enough">security.stackexchange.com</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ray Dalio's "Principles"]]></title>
    <link href="http://blog.kablamo.org/2013/12/15/dalios-principles/"/>
    <updated>2013-12-15T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/12/15/dalios-principles</id>
    <content type="html"><![CDATA[<p>I have been reading Ray Dalio&rsquo;s <em>Principles</em>.  Ray Dalio is the CEO of
Bridgewater which is a big famous successful hedge fund he started in the 70&rsquo;s.
<em>Principles</em>, is a 123 page philosophical text he published in 2011 about how
to live your life and how to manage people and organizations.  Its extremely
good.  I&rsquo;m not done yet but I have a feeling it is something I&rsquo;m going to be
rereading many times over the next few years.  You can download it from the
<a href="http://www.bwater.com/Uploads/FileManager/Principles/Bridgewater-Associates-Ray-Dalio-Principles.pdf">Bridewater website</a>.</p>

<p>Here is a sample:</p>

<blockquote><p>Most people react to pain badly. They have “fight or flight” reactions to it:
they either strike out at whatever brought them the pain or they try to run
away from it. As a result, they don’t learn to find ways around their barriers,
so they encounter them over and over again and make little or no progress
toward what they want&hellip;</p>

<p>Believe it or not, you are lucky to feel the pain if you approach it correctly,
because it will signal that you need to find solutions and to progress. Since
the only way you are going to find solutions to painful problems is by thinking
deeply about them &ndash; i.e., reflecting &ndash; if you can develop a knee-jerk reaction
to pain that is to reflect rather than to fight or flee, it will lead to your
rapid learning/evolving.</p></blockquote>

<p>And from that he derives this equation:</p>

<blockquote><p>Pain + Reflection = Progress</p></blockquote>

<p>So I&rsquo;ve been trying to do this.  Whenever I experience conflict, stress, anger,
or pain, I will try to make that into an opportunity to evolve and to become
stronger.</p>

<p>Quite a lot of <em>Principles</em> feels like common sense.  But at the same time I
can see that some of that common sense stuff is stuff I haven&rsquo;t been doing or
have been doing half way or just have not thought through as much as Dalio has.
I think that having this set of considered formalized principles to refer
to will help me to get what I want from life.</p>

<p>By the way, I discovered <em>Principles</em> via
<a href="http://sebastianmarshall.com/">Sebastian Marshall</a>.  Sebastion is an American
who has been living and working in Japan for about 10 years.  His writing is
always interesting and is a great source of new ideas for me.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to find and restore deleted files with git]]></title>
    <link href="http://blog.kablamo.org/2013/12/08/git-restore/"/>
    <updated>2013-12-08T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/12/08/git-restore</id>
    <content type="html"><![CDATA[<p>Don&rsquo;t be afraid to delete files from your git repository.  You can get restore
them.  You can even search for a string in a deleted file.  Here is how to find
a deleted file and its commit:</p>

<pre><code>git log --diff-filter=D --summary                  # all deleted files ever
git log --diff-filter=D --summary .                # all deleted files in cwd 
git log --diff-filter=D --author=Batman --summary  # all files deleted by Batman
</code></pre>

<p>How to restore a deleted file:</p>

<pre><code>git checkout &lt;commit&gt;~1 &lt;filename&gt;
</code></pre>

<p>To make this process a little easier next time I need to do it, I created a git
alias for finding deleted files by adding this to my .gitconfig file:</p>

<pre><code>[aliases]
deleted = log --diff-filter=D --summary
</code></pre>

<p>Now I can find and restore files like this:</p>

<pre><code>git deleted                         # find a deleted file and its commit
git checkout &lt;commit&gt;~1 &lt;filename&gt;  # restore the deleted file
</code></pre>

<h2>How to search the contents of deleted files</h2>

<p>But lets say I don&rsquo;t remember the filename of that file I deleted in a fit of
cleanup passion.  I do remember the name of one of the functions in it though.
Here is how to deal with that.  Search the contents of all files that have ever
existed in git for a string:</p>

<pre><code>git log --summary -S&lt;string&gt; [&lt;path/to/file&gt;] [--since=2009.1.1] [--until=2010.1.1]
</code></pre>

<p>Another way to do this:</p>

<pre><code>git rev-list --all | xargs git grep 'string'
</code></pre>

<p>Git is all knowing and all seeing and all powerful.  Hail git, powerful arcane
lord of source control.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tmux reloaded]]></title>
    <link href="http://blog.kablamo.org/2013/11/27/tmux-reloaded/"/>
    <updated>2013-11-27T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/27/tmux-reloaded</id>
    <content type="html"><![CDATA[<p>To reload your tmux configuration without restarting the server, add this to
your <code>~/.tmux.conf</code> file:</p>

<pre><code># reload the config file without restarting the tmux server
bind R source-file ~/.tmux.conf \; display-message "Config reloaded"
</code></pre>

<p>Notice thats a capital <code>R</code> not a lowercase <code>r</code>.  I keep forgetting that.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Configure tmux to give you status updates about anything]]></title>
    <link href="http://blog.kablamo.org/2013/11/26/tmux-status-updates/"/>
    <updated>2013-11-26T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/26/tmux-status-updates</id>
    <content type="html"><![CDATA[<p>I use and love OSX growl and Ubuntu notify style desktop notifications.  They
are gorgeous.  But they are also distracting and after a few vibrant and
whimsical but fleeting seconds they are gone forever and you have no way to get
them back.</p>

<p>A more useful (and less glorious) way to receive notifications is in your
<a href="http://tmux.sourceforge.net/">tmux</a> status bar.  tmux is the brilliant
successor to the venerable screen which hasn&rsquo;t been actively developed for
quite a while.</p>

<p>Here is how I configure notifications in my .tmux.conf file:</p>

<pre><code>set -g status-interval 15    
set -g status-right !exec my_shell_script
</code></pre>

<p>This tells tmux to run <code>my_shell_script</code> every 15 seconds.  It displays the
first line of output from the shell script.  Now I can get unobtrusive status
updates which don&rsquo;t go away. And if I ate a good breakfast, feel rested, and
have the wind at my back I can write some code to log my notifications to a
file so that I don&rsquo;t miss any.</p>

<p>Here are some ideas that might be useful which I might someday do maybe perhaps
possibly:</p>

<ul>
<li>Status updates when someone says your name on irc</li>
<li>Status updates when jenkins tests fail</li>
<li>Status updates when people push code live</li>
<li>Status updates when people merge branches</li>
</ul>


<p>Any other ideas?</p>

<p>Also don&rsquo;t miss the tmux <a href="https://github.com/Lokaltog/powerline">powerline</a>
status bar.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Anyenv + Plenv + Carton]]></title>
    <link href="http://blog.kablamo.org/2013/11/25/plenv/"/>
    <updated>2013-11-25T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/25/plenv</id>
    <content type="html"><![CDATA[<p>Recently I started breaking out of my Perl-only isolation bubble and dabbling
with other languages. I was surprised how easy and comfortable other languages
are. I think its because these days good ideas spread from one language to the
next incredibly fast. Even in a new language when I reach for a tool I can
usually find some Perl technology analogue.</p>

<p>For example, I&rsquo;ve been a perlbrew person for a long time and it has served me
well.  Ruby has its own version of perlbrew called rbenv which is pretty great.
But actually it seems every language has a clone of rbenv.</p>

<ul>
<li>Python has pyenv.</li>
<li>PHP has phpenv.</li>
<li>Node has ndenv.</li>
<li>Java has jenv.</li>
<li>Perl has plenv.</li>
</ul>


<p>So I thought, what the heck &mdash; lets try that out.  The nice thing
is all the envs have pretty much the same command line options and the same
approach to managing dependencies.  I thought it might be calming and soothing
for my brain to have one way of doing things.</p>

<p>I found <a href="https://github.com/riywo/anyenv">Anyenv</a> just a second ago as I was
writing this.  It claims it will manage all my envs. Looks like brilliant
stuff. Fortune favors the bold. (I eat danger for breakfast.)  I&rsquo;ll try it.</p>

<pre><code>git clone https://github.com/riywo/anyenv ~/.anyenv
echo 'export PATH="$HOME/.anyenv/bin:$PATH"' &gt;&gt; ~/.my_profile
echo 'eval "$(anyenv init -)"'               &gt;&gt; ~/.my_profile
exec bash -l
anyenv install rbenv    # ruby
anyenv install plenv    # perl
anyenv install pyenv    # python
anyenv install phpenv   # php
anyenv install ndenv    # nodejs
anyenv install denv     # dunno
anyenv install jenv     # java
exec bash -l            # &lt;-- useful trick btw
anyenv versions
</code></pre>

<p>Ok now I have all the envs.  But I want to actually do some work with plenv.
Lets see if I can do that.</p>

<pre><code>plenv install --list  # list all the potential perl versions you can use
plenv install 5.19.6  # install perl v5.19.6
plenv rehash          # reload the shell environment with the new perl
plenv global 5.19.6   # use v5.19.6 everywhere by default
plenv local  5.19.6   # use v5.19.6 in this directory for this project
plenv install-cpanm   # install cpanm for this version of perl
plenv rehash          #
plenv which cpanm     # see where cpanm is installed. should be ~/.anyenv
</code></pre>

<p>Now I will install the dependencies for my project.  I will manage them with
<a href="https://metacpan.org/pod/Carton">Carton</a>.</p>

<pre><code>cpanm Carton          # install carton for this version of perl
plenv list-modules
</code></pre>

<p>At this point I need to create a <code>cpanfile</code>.  There are all kinds of cool
things you can do in this file, but with your permision I will begin with baby
steps.  Here is mine cpanfile for now:</p>

<pre><code>requires "Catalyst";
requires "Plack";
requires "DBD::SQLite";
</code></pre>

<p>And then I run carton to install these modules locally into local/lib/perl5.</p>

<pre><code>carton               # install all the dependencies from the cpanfile
ls local/lib/perl5/  # see all the new modules installed here
plenv list-modules   # see mountains of installed stuff
cd /tmp
plenv list-modules   # see nothing installed except Carton
</code></pre>

<p>Notice that a carton.snapshot file was created.  If I look inside, I can see a
list of all my project dependencies, and all their dependencies, etc all the
way down to the first turtle &mdash; AND there are version numbers for everything.</p>

<pre><code># carton snapshot format: version 1.0
DISTRIBUTIONS
Apache-LogFormat-Compiler-0.13
  pathname: K/KA/KAZEBURO/Apache-LogFormat-Compiler-0.13.tar.gz
    provides:
      Apache::LogFormat::Compiler 0.13
    requirements:
      CPAN::Meta 0
      CPAN::Meta::Prereqs 0
      Module::Build 0.38
...blah biddee blah etc...
</code></pre>

<p>I can add <code>cpanfile</code> and <code>cpanfile.snapshot</code> to my git repo.  Now when I deploy
or share the code, the user at the destination can run Carton and they will end
up with the exact dependencies with the exact same version numbers I had. This
way I can be sure my code will run as successfully for them as it did for me.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monit - How to know when your web site is down]]></title>
    <link href="http://blog.kablamo.org/2013/11/24/monit/"/>
    <updated>2013-11-24T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/24/monit</id>
    <content type="html"><![CDATA[<p>If your website goes down, you want to find out fast.  There are a few ways to
accomplish this, but I&rsquo;m using <a href="http://mmonit.com/monit">monit</a>.  Monit is a
mature unix monitoring daemon and it gives me the ability not only get alerts
but to restart services that go down.</p>

<p>Monit has lotsa power and options and you can read about all of them on
the man page.  Or if you don&rsquo;t want to mess around with that you can pay them
for a <a href="https://mmonit.com/screenshots/">pretty web admin interface</a> and some
phone/tablet apps for a one time fee of € 65.  Another simpler and I think less
powerful option is <a href="http://monitis.com/?affiliate=1303230640">monitor.us</a>.</p>

<p>I don&rsquo;t want to pay.  So I installed monit like this:</p>

<pre><code>apt-get install monit
</code></pre>

<p>The configuration file for monit lives at <code>/etc/monit/monitrc</code>.  You probably
don&rsquo;t need to bother with that.  When monit runs, it looks in
<code>/etc/monit/conf.d</code> and executes any scripts it finds in there.  Like many
people I&rsquo;m running nginx in front of my Starman web apps.  So I want monitor
both of those processes.</p>

<p>Here is how to do that.  Created a script named <code>/etc/monit/confd/nginx</code>:</p>

<pre><code>check process nginx with pidfile /var/run/nginx.pid

    start program = "/etc/init.d/nginx start"
    stop  program = "/etc/init.d/nginx stop"

    alert kablamo@example.com with mail-format {
           from: monit@example.com
        subject: monit alert: $SERVICE $EVENT $DATE
        message: $DESCRIPTION
    }

    if failed port 80 protocol HTTP
        request /
        with timeout 7 seconds
        then restart
</code></pre>

<p>Then create a second script named <code>/etc/monit/conf.d/mywebapp</code>.  Its very
similar.  This assumes you are running your web app as the user <code>web</code> on
localhost port 22222.</p>

<pre><code>check process mywebapp with pidfile /var/run/mywebapp.pid

    start program = "/etc/init.d/mywebapp start" as uid web and gid web
    stop  program = "/etc/init.d/mywebapp stop"  as uid web and gid web

    alert kablamo@example.com with mail-format {
           from: monit@example.com
        subject: monit alert: $SERVICE $EVENT $DATE
        message: $DESCRIPTION
    }

    if failed port 22222 protocol HTTP
        request /
        with timeout 7 seconds
        then restart
</code></pre>

<p>With these scripts, anytime your processes disappear or stop working you will
get email and monit will try to restart them.</p>

<p>But I&rsquo;m paranoid.  So I created a third monit script to do an end to end test in case
something ever gets misconfigured somewhere. <code>/etc/monit/conf.d/end2end</code>:</p>

<pre><code>check host networthify.com with address 71.19.156.131

    alert kablamo@example.com with mail-format {
           from: monit@monit@example.com
        subject: monit alert: $SERVICE $EVENT $DATE
        message: $DESCRIPTION
    }

    if failed port 80 protocol HTTP
        request /
        with timeout 9 seconds
        then alert
</code></pre>

<p>Suggestions for improvment?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Devops with Rex]]></title>
    <link href="http://blog.kablamo.org/2013/11/22/rex/"/>
    <updated>2013-11-22T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/22/rex</id>
    <content type="html"><![CDATA[<p>I have recently been playing with <a href="http://www.rexify.org/">Rex</a> and wanted to
write down some of my initial thoughts.</p>

<p>Rex is a devops tool that helps you manage your servers.  Its similar to
Puppet Lab&rsquo;s <a href="http://puppetlabs.com/mcollective">mcollective</a> tool or
<a href="http://www.ansibleworks.com/docs/">ansible</a>.  You can easily run commands on
your entire fleet of boxen or just on certain subgroups.  And you can run
them in parallel which saves you giant baskets of time.</p>

<p>The big advantage for People Who Prefer Perl (PWPP) is that Rex is written and
configured with Perl. So for the most part you don&rsquo;t need to spend a lot of time
learning yet another DSL.</p>

<p>Another happy positive is that you don&rsquo;t need to install any software on your
servers. Installation is simple:</p>

<pre><code>$ apt-get install libssh2-1-dev
$ cpanm Rex
</code></pre>

<p>Configuration is also simple &mdash; at least if you know Perl.  The
Rex configuration file is named &lsquo;Rexfile&rsquo; and its syntax is Perl with some
extra Rexy sugar methods thrown in. And I feel the sugar and general API for
Rex is fairly well done.  Here is an example Rexfile:</p>

<pre><code># Configure the default user and your ssh keys.  The default user can be
# overridden on the command line with the -u option.
user "joe";
private_key "/home/joe/.ssh/id_rsa";
public_key "/home/joe/.ssh/id_rsa.pub";
key_auth;

# Cofigure server groups
group prod =&gt; "webserver", "mailserver", "dbserver";
group dev  =&gt; "pancake[1-3]", "narwhale[1-3]", "honeybadger[1-3]";

# Run commands in parallel on up to 100 servers at one time.  This can be
# overridden on the command line with the -t option.
parallelism 100;

# Create tasks.  This task runs against all servers by default.  This can
# be overridden on the command line with the -G or -H options.
task 'uptime', group =&gt; 'all', sub {
    my $output = run "uptime";
    say $output;
};
</code></pre>

<p>You can see that Perl&rsquo;s &lsquo;say&rsquo; command is available by default.  &lsquo;run&rsquo; is a Rex
sugar method which accepts a shell command and returns the output &mdash; similar
to Capture::Tiny.</p>

<p>Here is a command line example which runs the &lsquo;uptime&rsquo; task as the &lsquo;root&rsquo; user
on each server in the &lsquo;dev&rsquo; group:</p>

<pre><code>$ rex -G dev -u root uptime
    pancake1:  16:42:05 up 221 days,  9:49,  1 user,  load average: 0.00, 0.00, 0.00
   narwhale2:  16:42:05 up 8 days,  3:28,  4 users,  load average: 0.00, 0.00, 0.00
   narwhale3:  16:42:05 up 17 days,  3:57,  2 users,  load average: 0.01, 0.01, 0.00
honeybadger1:  16:42:05 up 80 days,  3:29,  1 user,  load average: 0.09, 0.06, 0.01
    pancake3:  16:42:05 up 137 days,  7:49,  1 user,  load average: 0.00, 0.00, 0.00
   narwhale1:  16:42:05 up 65 days,  5:30,  2 users,  load average: 0.46, 0.41, 0.37
honeybadger3:  16:42:04 up 15 days,  4:49,  1 user,  load average: 2.00, 2.00, 2.00
    pancake2:  16:42:04 up 1 day,  2:23,  3 users,  load average: 1.38, 1.35, 1.30
honeybadger2:  16:42:05 up 39 days,  1:24,  1 user,  load average: 0.08, 0.06, 0.01
</code></pre>

<p>Rex is fantastic for ad-hoc commands.  But it also has a great set of libraries
for doing much more like installing debian packages, user management,
virtualization, and managing EC2 boxes.  I have to say I&rsquo;m deeply attracted to
its simplicity &mdash; especially after dealing with Puppet&rsquo;s complicated and weird
DSL.</p>

<p>If anyone uses Rex to manage more than 50 servers, I would love to get in touch
with you and ask a few questions.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learning Ruby with online university classes]]></title>
    <link href="http://blog.kablamo.org/2013/11/19/learning-ruby/"/>
    <updated>2013-11-19T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/19/learning-ruby</id>
    <content type="html"><![CDATA[<p>I just completed UC Berkeley&rsquo;s Software as a Service class (via
<a href="http://edx.com">edX.com</a>).  I had a great experience and highly recommend
it.</p>

<p>The class is a tour of all the tools Ruby developers use to create and
deploy websites.  It assumes you already know how to program at a fairly high
level but not necessarily in Ruby.  I have no plans to stop writing Perl code
(which I love).  I just wanted to broaden my horizons, have some fun, and
increase my <a href="http://www.codusoperandi.com/posts/increasing-your-luck-surface-area">luck surface area</a>.</p>

<p>Hands up, who uses what they learned from university classes in their current
job?  No one right?  While online education is clearly the future I was
initially sceptical that a traditional, old school (hah) institution like
Berkeley was innovative enough to do a good job.</p>

<p>I underestimated them.  This class was refreshingly current and practical.  I
got an introduction to a tsunami of tools. I learned to use Ruby, Rails, Rake,
Heroku, ActiveRecord, HAML, SASS, RSpec, Cucumber, and Capybara.  They also
explained REST, DRY, agile iterative development processes, and other stuff I
can&rsquo;t remember right now.</p>

<p>Another thing they got right is we were able to submit our homework over and
over again until we got all the answers.  And the ability to play
lectures at double speed is every bit as brilliant as I imagined it would be.
I wish I had this super power on YouTube.  I was also happy to see the course
supplied students with an Ubuntu powered virtual machine preconfigured with all
the necessary software.</p>

<p>I only had a few minor complaints.  My biggest is that the course didn&rsquo;t spend
any time on sysadmin topics like rbenv and bundler.  I purposely avoided using
the virtual machine so that I would learn that stuff.  Knowing how to use your
tools and configure your environment is a crucial part of being a good
programmer.  This can perhaps be forgiven though since it was only a 5 week
class and we raced through every topic like our pants were on fire.</p>

<p>Altogether it was a fun experience at a great price (free) and I recommend it.
My next class is Chinese History.</p>

<pre style="font: 4px/2px monospace; color: #333; background: transparent; border: 0px; border-radius: 0; box-shadow: 0 0 0 0;">
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                    ::::::::;;;;;;;;;::::::::::::::::        `::::::::::::::::::::::::   
                                                                    ::::::::;''''''''::::::::::::::::        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::::        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::::        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::;:        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::;:        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::;:        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::::        `:::::::::::::::::::::::;   
                                                                    ::::::::;''''''''::::::::::::::::        `:::::::::::::::::::::::;   
                                                                    ::::::::;'''''''':::::::::::`````         `````:::::::::::;:::::::   
                                                                          ::::::::;'':::::::::::.                 ,:::::::::::::.        
                                                                          :::::::::;'::::::::::::                `:::;::::::::;:         
                                                                          ::::::::::':::::::::::::               ;::::::::::::;          
                                                                          ::::::::::,::::::::::::::             :::::::::::;::           
                       `,,::,.                                            :::::::::::`:;::::::::;:;.           ,:;:::::::::::`           
                   ,;;;;;;;;;;;;':                    .::::::::.          ::::::::::: ,:::::::::::::          `:::::::::::::.            
                 ;;;;;;;;;;;;;;;;;;;`             `:::::::::::::::.       :::::::::::  :::::::::::::;         :;:::::::::::,             
               ';;;;;;;;;;;;;;;;;;;;;;`         `:::::::::::::::::::.     :::::::::::   :;::::::::::::       :::::::::::::;              
             :;;;;;;;;;;;;;;;;;;;;;;;;;;       :::::::::::::::::::::::    :::::::::::    :::::::::::::.     ::::::::::::::               
            ';;;;;;;;;;;;;;;;;;;;;;;;;;;;`   `:::::::::::::::::::::::::`  :::::::::::    `::::::::::::;    `:::::::::::::                
           ';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;, ::::::::::::::::::::::::::::. :::::::::::     ,;;::::::::::;   ;:;:::::::::;.                
          ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;':::::::::::::::::::::::::::::`:::::::::::      ;;;::::::::::: ::::::::::::::                 
         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;++'::::::::::::::::::::::::::::::::::::::::       ;:::::::::;;:;:;:;:::::::::                  
        ';;;;;;;;;;;;;;;';'';;;;;;;;;;;;;'+++;:::::::::::::::::::::::::::::::::::::::        ::::::::::::::::::::::::;                   
       ;;;;;;;;;;;;;;;`       `;;;;;;;;;'+++++:::::::::::::::::::::::::::::::::::::::        .:::::::::::::::::::::::                    
      `;;;;;;;;;;;;;             :;;;;;;+++++++:::::::::.       `::::::::::::::::::::         :::::::::::::::::::;::`                    
      ;;;;;;;;;;;;.                ;;;;++++++++;::::::             ,:::::::::::::::::          ::::::::::::::::::::,                     
     ,;;;;;;;;;;;                   ;''+++++++++::::.                ::::::::::::::::           :::::::::::::::::::                      
     ;;;;;;;;;;;                     ;++++++++++:::`                  :::::::::::::::           `:::::::::::::::::                       
    `;;;;;;;;;;                       +++++++++++:`                    ::::::::::::::            .;::::::::::::::                        
    ;;;;;;;;;;:                      ::++++++++++.                      :::::::::::::             ;:::::::::::::`                        
    ;;;;;;;;;;                       ::'+++++++++`                      ,::::::::::::            `;:::::::::::::;                        
   `;;;;;;;;;,                      `:::++++++++;:                       ::::::::::::            :;:::::::::::::::                       
   :;;;;;;;;;                       ,:::++++++++;'                       ,:::::::::::           :::::::::::::::::::                      
   ';;;;;;;;;```````````````````````;;:;;++++++';;                        :::::::::::          ::::::::::::::::::::.                     
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;                        :::::::::::         ,::::::::::::::::::;::                     
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;                        :::::::::::        `::::::::::::::::::::::;                    
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;`                       ,::::::::::        :;;:::::::::::::::::::::;                   
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;`                       ,::::::::::       ;::::::::::::::::::::::::;,                  
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;`                       ,::::::::::      :::::::::::::: ;;;;:::::::::.                 
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;                        :::::::::::     ,::::::::::::;   ;:::::::::::;                 
   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;;                        :::::::::::    `:::::::::;:::    `:;:::::::::::                
   ';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++++++++++;;'                        :::::::::::    :::::::::::::`     ,:::::::::::::               
   ;;;;;;;;;;                       :::::::::::.                         `:::::::::::   ::;::::::::::,       :::::::::::;:,              
   ,;;;;;;;;;.                      .:::::::::::                         ::::::::::::  ::::::::::::;;         :;:::::::::::.             
    ;;;;;;;;;'                       :::::::::::`                       `:::::::::::: ,:::::::::::::           :::::::::::::             
    ;;;;;;;;;;`                      ::::::::::::                       :::::::::::::`:::::::::::::            .:::::::::::::            
    :;;;;;;;;;;                      .::::::::::::                     ,:::::::::::::;::::::::::::.             ::;:::::::::::           
     ;;;;;;;;;;;                     ,++++++++++':,                   .:::::::::::::':::::::::::;:               ;:::::::::;:;,          
     ';;;;;;;;;;:                   `;'+++++++++:::,                 ,:::::::::::::'';::;:::::::;                 :::::::::::::`         
      ;;;;;;;;;;;;                 `;;;++++++++;:::::               ::::::::::::::;'':::::::::::                  `:::::::::::::         
      :;;;;;;;;;;;'`              ,;';;'+++++++::::::::           ,:::::::::::::::'''::::::::::`                   ,::::::::::::;        
       ';;;;;;;;;;;;;           .';;;;;;'++++':::::::::::,`   `,::::::::::::;''''''''''''';:::,````           ``````:;::::::::::::::::.  
        ;;;;;;;;;;;;;;';.` `.:';;;;;;;;;;++++'::::::::::::::::::::::::::::::;''''''''''''';:::::::::.         ,:::::::::::::::::::::::.  
        .;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+++:::::::::::::::::::::::::::::::;''''''''''''';:::::::::.         ,::::::;::::::::::::::::.  
         ,;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+::::::::::::::::::::::::::::::::;''''''''''''';:::::::::.         ,:::::::::::::::::::::::.  
          :;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ::::::::::::::::::::::::::::; ::;''''''''''''';:::::::::.         ,:::::::::::::::::::::::.  
           .;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   :::::::::::::::::::::::::::  ::;''''''''''''';:::::::::.         ,:::::::::::::::::::::::.  
             ';;;;;;;;;;;;;;;;;;;;;;;;;;,     .::::::::::::::::::::::::   ::;''''''''''''';:::::::::.         ,:::::::::::::::::::::::.  
              ,;;;;;;;;;;;;;;;;;;;;;;;'         :::::::::::::::::::::,    ::;''''''''''''';:::::::::.         ,:::::::::::::::::::::::.  
                :;;;;;;;;;;;;;;;;;;;'             ,::::::::::::::::,      ::;''''''''''''';:::::::::.         :;::::::::::::::::::::::.  
                  .;;;;;;;;;;;;;;;:                 `::::::::::::`        ::;';;;;;;;;;;;;;:::::::::.         ,:::::::::::::::::::::::.  
                      ,;;;;;;;;.                          ```                                                                            
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
                                                                                                                                         
</pre>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Down a rabbit hole - Go-lang and its decentralized CPAN]]></title>
    <link href="http://blog.kablamo.org/2013/11/13/go/"/>
    <updated>2013-11-13T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/13/go</id>
    <content type="html"><![CDATA[<p>I have been in a rabbit hole for the last week.  I started by looking at Docker
(<a href="http://blog.kablamo.org/2013/11/13/docker/">See my previous post</a>).  It turns
out Docker is written in Go and so somehow I ended up learning
<a href="http://golang.org/">Go</a>.  Well &ldquo;learning&rdquo; is an overstatement.  I&rsquo;ve read
about it for a few days and wrote a tiny bit of code.</p>

<p>But anyway, the coolest thing about Go so far is its decentralized libraries.
<em>Centralized</em> collections of libraries have been all the rage the last few years
and it seems like all the languages have gotten hip to that &mdash; CPAN, rubygems,
pypi, npm, etc.</p>

<p>But one of the biggest problems with publishing Perl modules on CPAN is how
difficult it is to do.  Sure its easy after you figure out the PAUSE website
exists, create a PAUSE account, read all the Dist::Zilla docs and some of the
source code, and write your own personalized plugin.  After that it just takes
one little command.</p>

<h1>How it works in Go</h1>

<p>If you want to use some libraries in your Go code, it looks like this:</p>

<pre><code>import (
    "log" 
    "time"
    "errors"
    "github.com/dotcloud/docker"
    "github.com/fsouza/go-dockerclient"
)
</code></pre>

<p>The first 3 are core libraries distributed as part of Go.  But the last two you
have to download and install yourself.  Doing that is very simple:</p>

<pre><code>export GOROOT=$HOME/go
go get github.com/dotcloud/docker
</code></pre>

<p>This downloads all the dependencies too.  Of course.</p>

<p>The next question you will ask me is how do people learn about new libraries in
a decentralized world?  There are websites like
<a href="http://gowalker.org/">http://gowalker.org/</a> which scrape GitHub&rsquo;s recent updates
page.  They also do this for BitBucket, Google Project Hosting, and a couple
other sites.</p>

<p>This new language has shiny modern features and is very easy to get up and
running.</p>

<pre style="font: 4px/2px monospace; color: #333; background: transparent; border: 0px; border-radius: 0; box-shadow: 0 0 0 0;">
                              ,'#@@@@@@@#+';;;''#@@@@@#,                            
                          ;@@@@#;.                    '@@@;                         
                       ;@@@:                             ,@@@                       
                     #@@.                                   +@@                     
                   @@+                                        +@;   +@@@@@#         
         ,,      +@+                               #@@@@+       @@@@#  @@       
     .@@@@@@@@' @@      .+@@@+.                 :@        @,     @@         @@      
    @@:      .@@;     ++       #+              @            @     #@         @@     
   @@         @;               @            @              @     @@         @     
  ;@         @#    ,:             '        @                @     @' :    #+    
  @         +@     ;               '        ;                  ,     @@@@;    ,@    
  @      '' @     @                 @       #                  @     '@@@@     @    
 :@     @@@@:    :                   .     ,                          @@@@     @    
 ;#     @@@@     @                   @     #  +@@@:             +     ,@@     ,@    
 :@     @@@    : ,@@@@             +     @ #@@@@@:            @      @    @;    
  @     .@@     @@@@@                  @ @@@@@@@            @      :@     @     
  @      @,     . @@@@@@@                  @ @@@@@:@            @       @    @:     
  ;@     @      . @@@@@.@.                 @ @@@@@            #       #' .@'      
   @@   '#       @@@@ ,            :     ; ,@@@@@             :       @@.       
    @@. @.       # @@@@@'            @      ;  #@#             :         @:         
     ,@@@        @  '@#.             +      @                  @         @:         
       .@         :                 '        @                '          :@         
       '#         +                 ;         '              .,           @         
       @:          @               @  @@@@@@,  @            ;,            @         
       @          @             @  @@@@@@@@.  @:        .@              @,        
       @             ;+         #,  #@@@@@@@@'    +@+::+@#                ++        
       @               ;@;,.,'@:    @@@@@@@@@@:                           :@        
       @                          #, ,@@@@@@   @                           @        
      .@                         @              '                          @        
      ;#                                       @                         @        
      ++                        :                ;                         @        
      +'                                         '                         @        
      #:                         @    ;@;@'@     @                         @      
      @,                          :+''   @  .@@@:                          @.       
      @,                                 @   :                             @.       
      @.                            ,    @   .                             @,       
      @,                            ;    @                                 @,       
      @,                            '    @                                 @:       
      #:                            :    @                                 @:       
      #;                             +  @ :  @                             @:       
      ++                              +;   ;.                              @:       
      ;#                                                                   @:       
      ,@                                                                   @:       
       @                                                                   @:       
       @                                                                   @,       
       @                                                                   @,       
       @                                                                 @,       
       @,                                                                  @,       
       +'                                                                  @,       
       :@                                                                  @:       
       .@                                                                  @:       
        @                                                                  @:       
        @                                                                  #;       
        @                                                                  #;       
        @                                                                  +@@,     
      '#@                                                                  '+  ;@.  
   +@.  @                                                                  '#     @ 
 ';     @                                                                  ;@      @
.       @                                                                  :@      #
@       @                                                                  ,@    @ @
+ @  ,@                                                                  .@@    # 
 @    ':@                                                                   +; .+ 
 ,.  @ .@                                                                   @     
   ;   .@                                                                   @       
       ,@                                                                   @       
       :@                                                                   @       
       ;#                                                                   @       
       '#                                                                   @       
       '+                                                                   @       
       +'                                                                   @       
       #;                                                                   @       
       #;                                                                   @       
       @:                                                                   @     
       @:                                                                   @.      
       @,                                                                   @,      
       @,                                                                   @,      
       @,                                                                   @,      
       @,                                                                   @,      
       @.                                                                   @.      
       @.                                                                   @     
       @.                                                                   @       
       @.                                                                   @       
       @,                                                                   @       
       @,                                                                   @       
       @,                                                                  .@       
       @,                                                                  '#       
       @:                                                                  @:       
       @:                                                                  @        
       #;                                                                  @        
       +'                                                                 ,@        
       '+                                                                 #'        
       ,@                                                                 @         
        @                                                                         
        @.                                                               @'         
        ;@                                                               @          
         @                                                              +@          
         '@                                                             @           
          @,                                                           #@           
          .@                                                           @            
           #@                                                         @:            
            @#                                                       @#             
             @+                                                     @@              
              @#                                                  .@@               
               @@@#                                              @   .#             
             ''    #                                            @      @            
            @       @                                          @        '           
           @         @                                       @@+        ;           
          :   .       @+                                  :@@+  +.    @  +          
          @  @      @, #@@;                            ;@@@,     ;    .  @          
          ' @     ':     ,@@@#:                   :+@@@@:         #    @ @          
          @ :    #           ;@@@@@@@#####@@@@@@@@@+.              @   ; .          
           @    @                  ,:;''';;:,                     @  #,           
            ;@##                                                     `             
</pre>


<p>(the golang mascot)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Down a rabbit hole - Docker]]></title>
    <link href="http://blog.kablamo.org/2013/11/13/docker/"/>
    <updated>2013-11-13T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/13/docker</id>
    <content type="html"><![CDATA[<p>I have been in a rabbit hole for the last week.  I started looking at
<a href="http://www.docker.io/">Docker</a>.</p>

<p>Its a really interesting project that all the hosting providers seem to be
moving towards.  Its helpful at first to think of Docker as a really fast and
small virtual machine.  You can put an operating system in a virtual machine,
setup all the dependencies and permissions, and then configure and install your
app.  Its encapsulates your web app and makes it easy to move around.
Thats what docker does too except a docker container is an operating system
primitive &ndash; an <a href="http://linuxcontainers.org/">LXC</a>.  Which means its much faster
and smaller than a virtual machine and that makes it much easier to work with.</p>

<p>Docker also has a builtin version control system.  You can install a base
operating system like Ubuntu in your container and then commit that change.
Then you can install some dependencies and commit that change.  This commit
history also allows you to reuse different commits across different containers.</p>

<p>Docker also has builtin deployment that allows you to push your containers to
public (or private) repositories similar to CPAN or Ruby gems or pypi.</p>

<p>But I said this was a rabbit hole.  Because when I started playing with Docker
I realized its written in Go.  So I started learning <a href="http://golang.org/">Go</a>.
More on that tomorrow.</p>

<pre style="font: 4px/2px monospace; color: #333; background: transparent; border: 0px; border-radius: 0; box-shadow: 0 0 0 0;">





                                                              '''''''''''';
                                                              '''''''''''';
                                                              ''::;;::;;:';
                                                              ''::''::'':';
                                                              ''::''::'':';
                                                              ''::''::'':';
                                                              ''::''::'':';
                                                              ''::''::'':';
                                                              ''::''::'':';
                                                              ''::''::'':';
                                         ''''''''''''''''''''''':::::::::';
                                         ''''''''''''''''''''''''''''''''';                          ''
                                         '':::::::::':::::::::;':::::::::';                         ''''.
                                         '':;';:''::':'::''::';'::''::'':';                         '':'',
                                         '':;';:''::':'::''::';'::''::'':';                        '':::''`
                                         '':;';:''::':'::''::';'::''::'':';                        ''::::''
                                         '':;';:''::':'::''::';'::''::'':';                        ';:::::''
                                         '':;';:''::':'::''::';'::''::'':';                       ,'::::::''.
                                         '':;';:''::':'::''::';'::''::'':';                       ;':::::::''
                                         '':;';:''::':'::''::';'::''::'':';                       '':::::::;'
                                         '':::::::::':::::::::;':::::::::';                       ''::::::::';
                               ''''''''''''''''''''''''''''''''''''''''''''''''''''''             ''::::::::'' `,;'':.
                               '':::::::::':::::::::';::::::::;':::::::::':::::::::''             ;'::::::::'''''''''''':
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''             `'::::::::''';::::::'''',
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''              '':::::::::::::::::::;''
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''              '':::::::::::::::::::;';
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''              .';::::::::::::::::::''
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''               '':::::::::::::::::''
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''               `'':::::::::::::::''.
                               '';:;';:'':':;'::''::';';:''::';'::''::'':':''::'':;''             .'''::::::::::::::'''`
                               '';:;';:'':':;'::;'::';';:''::';'::;'::';:':''::'':;''          .'''''::::::::::::'''''
                      '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''';:::::::''''''''''
                      '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''';:::::::::::''''';.
                      '':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::''
                      '':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::''
                      ''::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::''
                      '':::::::::::::::::::::::::::::::'::::::::::::::::::::::::::::::::::::::::::::::::''         ;
               ':     ''::::::::;;::::::::::::::::::::''':::::::::::::::::'':::::::::::::::::::::':::::''         ''
              '''',   ''::::::;'''':::::::::::::::::'''''';:::::::::::::'''''';::::::::::::::::;'''';::''       '''''
            '''''''''''';''''''''''''';::::::::;''''''''''''''::::::;'''''''''''''';::::::::'''''''''''';,,:'''''''''',
        .'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''';
                      '';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''
                      ,';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''.
                       '';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''
                       '';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''
                       '';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''
                        '';;;;;;;;;;;;;;;;;;;;;;;;`.`;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'':
                        '';;;;;;;;;;;;;;;;;;;;;;;`''``;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                        .'';;;;;;;;;;;;;;;;;;;;;;`'''`;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                         '';;;;;;;;;;;;;;;;;;;;;;`'''`;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                         .'';;;;;;;;;;;;;;;;;;;;;;```;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                          '';;;;;;;;;;;;;;;;;''';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                           '''''''''''''''''''';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                           `''''''''''''';.````;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'';
                            :';........`````````;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''`
                             ;''..........``````;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'''
                              ;''..............``;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''':
                               ;''................;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''''
                                .'':...............;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;''''`
                                  '''...............;;;;;;;;;;;;;;;;;;;;;;;;;;;''''.
                                   :'''..............;;;;;;;;;;;;;;;;;;;;;;;'''''`
                                     ''''.............;;;;;;;;;;;;;;;;;;;''''''
                                       ;'''',...........;;;;;;;;;;;;;'''''''
                                         `'''''';:........;;;;'''''''''':
                                             :''''''''''''''''''''';.
                                                  `,:;;;;;;,.



                          .`
                         ''';                                             ''':
                         ''''                                             ''''
                         ''''                                             ''''
                         ''''                                             ''''
                         ''''                                             ''''
                         ''''                                             ''''
               ;'''''.   ''''         ;'''''.                '''''',      ''''     `':         ,''''''                 :'''
             '''''''''': ''''       '''''''''''           `'''''''''':    ''''    :'''       ,''''''''''            .'''''':
           :'''''''''''''''''     :'''''''''''''         ;''''''''''''    ''''   :''''      ''''''''''''';         '''''''':
          ;''''''''''''''''''    ;'''''''''''''''       ''''''''''''''    ''''  :'''''     ''''''''''''''''       '''''''''
         .'''''      ;'''''''   .'''''      ;'''''     :'''''      :',    '''' :'''''     ''''':      '''''.     ''''''
         '''';         ''''''   '''';         '''',    '''':              '''':'''''     ,''''         .''''    .''''`
        :''''           '''''  :''''           ''''   ;''''               '''''''''      ''''          ;''''    ''''`
        ''''            ;''''  ''''            ;'''   ''''                ''''''''       ''';         ''''''    ''''
        ''''             ''''  ''''             ''';  ''''                '''''''       ''''         ''''';    :'''
        '''.             ''''  '''.             ''''  '''.                ''''''        ''''        '''''.     ''''
        '''              ''''  '''              ''''  '''                 '''''         ''''      `'''''       ''''
        '''.             ''''  '''.             ''''  '''.                '''''.        ''''     ,'''''        ''''
        ''';             ''''  ''';             ''''  ''';                ''''''.       ''''    ;'''''         ''''
        ''''            ,''',  ''''            ,''',  ''''                '''''''.      `''':  ''''''          ''''
        ;''':           ''''   '''':           ''''   :''':               ''''''''`      '''' ''''';           ''''
         ''''`         '''''    ''''.         '''''    ''''.              '''''''''`     ,'''''''',            ''''
         :'''''       '''''     ;'''''       '''''     ;'''''       ;     '''' '''''`     '''''''`    :'       ''''
          ''''''',,;''''''`      ''''''',,:''''''`      ''''''';,;''''    ''''  '''''`     ''''''';;'''''      ''''
           ''''''''''''''.        ''''''''''''''`        '''''''''''''    ''''   '''''      '''''''''''''      ''''
            ;'''''''''''           ;'''''''''''           ''''''''''''    ''''    ''''`      '''''''''''`      ''''
              ;'''''''               ;'''''''               ''''''''`     .''`     '''         ;'''''',        `'':









</pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My contribution to the Linux ate my RAM problem]]></title>
    <link href="http://blog.kablamo.org/2013/11/12/linux_ate_my_ram/"/>
    <updated>2013-11-12T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/11/12/linux_ate_my_ram</id>
    <content type="html"><![CDATA[<p>I can never remember how to know how much free memory I have.</p>

<p>The Linux kernel claims most of the operating system&rsquo;s memory.  That doesn&rsquo;t
mean the operating system is out of memory.  It means the kernel has claimed it
and is managing it.  The problem is that the Linux kernel defines &lsquo;free&rsquo; memory
differently than any reasonable user.  There are excellent shiny reasons for
that, but as a user I don&rsquo;t really care.</p>

<pre><code>~ ⚡ free -m 
            total       used       free     shared    buffers     cached
Mem:          3822       2066       1755          0        147       1125
-/+ buffers/cache:        793       3029
Swap:         3394          0       3394
</code></pre>

<p>Experienced users and sysadmins will know from this means my system currently
has 3822 MB of total memory and 3029 MB of free memory.  Errr.  What?  See
<a href="http://www.linuxatemyram.com">linuxatemyram.com</a> for a more detailed
explanation.</p>

<p>I think the world deserves something easier to deal with.  So I wrote &lsquo;mem&rsquo;.
Use it like this:</p>

<pre><code>~ ⚡ mem
   927 MB used (24%)
  3823 MB total
</code></pre>

<p>Its a bash function.  I put the following in my
<a href="https://github.com/kablamo/dotfiles/blob/master/links/.bash/aliases.sh">.bashrc</a>:</p>

<pre><code>mem() {
    memfree=$( grep '^MemFree:' /proc/meminfo | awk '{ mem=($2)/(1024) ; printf "%0.0f", mem }' )
    buffers=$( grep '^Buffers:' /proc/meminfo | awk '{ mem=($2)/(1024) ; printf "%0.0f", mem }' )
    cached=$(  grep '^Cached:'  /proc/meminfo | awk '{ mem=($2)/(1024) ; printf "%0.0f", mem }' )
    free=$( echo $memfree+$buffers+$cached | bc -l )

    total=$( grep '^MemTotal:' /proc/meminfo | awk '{ mem=($2)/(1024) ; printf "%0.0f", mem }' )
    used=$( echo $total-$free | bc -l )
    pct=$( echo 100*$used/$total | bc -l )

    printf "%5.f MB used (%.0f%%)\n%5.f MB total\n" $used $pct $total
}
</code></pre>

<p>See also &lsquo;htop&rsquo; (sudo apt-get install htop).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[git-vspark plots your commits vertically with Term::Vspark]]></title>
    <link href="http://blog.kablamo.org/2013/03/17/git-vspark/"/>
    <updated>2013-03-17T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/03/17/git-vspark</id>
    <content type="html"><![CDATA[<p>I added a <strong>git-vspark</strong> script to my App::Git::Spark CPAN module.  It does the
same thing as <a href="https://github.com/kablamo/git-spark">git-spark</a> but instead of
normal horizontal sparklines, it uses &ldquo;vertical&rdquo; sparklines.  Here&rsquo;s what that
looks like:</p>

<pre><code>$ git vspark --months 8 batman
Commits by batman over the last 8 months
total: 233   avg: 29   max: 69
 12 ██▋
 18 ████
 69 ███████████████▏
 59 ████████████▉
 16 ███▌
 28 ██████▏
 12 ██▋
 19 ████▎
</code></pre>

<p>This effect is achieved using
<a href="https://metacpan.org/module/Term::Vspark">Term::Vspark</a>.  Its companion module
<a href="https://metacpan.org/module/Term::Spark">Term::Spark</a> is a small pure Perl
replacement for Zach Holman&rsquo;s original <a href="https://github.com/holman/spark">spark</a>
implementation and it now powers my git-spark script.</p>

<p>These libraries were fun little projects developed over the past few weeks
mainly by <a href="https://github.com/LuRsT">Gil Gonçalves</a> with a few pull requests
from myself.  Having them available on CPAN means you can easily use sparklines
in your own Perl code.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chinese zombie flashcards on GitHub (Catalyst & Perl)]]></title>
    <link href="http://blog.kablamo.org/2013/02/28/chinese-flashcards/"/>
    <updated>2013-02-28T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/02/28/chinese-flashcards</id>
    <content type="html"><![CDATA[<p>There seem to be quite a few Perl people learning Chinese so maybe this will be
relevant here.</p>

<p>I created <a href="http://iijo.org">IIJO</a> which is a Perl powered website that does 3
sided flashcards (Chinese, English, and Pinyin).</p>

<p>The main advantage IIJO has over Anki and other flashcard sites is that you can
pick your flashcards from a dictionary so you don&rsquo;t have to type all that stuff
in yourself.   It allows you to share word lists with others and the built in
dictionary means that you don&rsquo;t need to worry about the accuracy and
completeness of other people who share wordlists.</p>

<p>The site does <a href="http://en.wikipedia.org/wiki/Spaced_repetition">spaced repetition</a>
like Anki.  But it has a different simpler user interface because Anki&rsquo;s 4
buttons after each flashcard <em>stresses me out.</em></p>

<p>If you want, you can just play with the <a href="http://iijo.org/dictionary">Chinese/English dictionary</a>.<br/>
The goal here is to be able to look up a word then add it easily to one of your
existing word lists.</p>

<p>If you think there is something missing, check out the project on
<a href="http://github.org/kablamo/iijo.org">GitHub</a> and send me a pull request.  I&rsquo;m
using Perl, Catalyst, and SQLite.</p>

<p>Here are some of the things on my todo list:</p>

<ul>
<li>More analytics/stats/data for measuring progress using D3</li>
<li>Speech/pronunciation samples</li>
<li>Export to Anki</li>
<li>Some way to learn phrases instead of just characters</li>
</ul>


<h1>Vampires and zombies</h1>

<p>Btw, here&rsquo;s an interesting thing I learned about the Chinese language: the word
for <code>vampire</code> is the same word thats used for <code>zombie</code>.</p>

<center><p style="margin-bottom: .5em; font-size: 4em; font-weight: bold;">僵尸</p></center>


<p>This is because the Chinese merged the two concepts into a single vampire
zombie monster.  So Chinese zombies are stiff and walk around with their hands
straight out.  But they also bite their victim&rsquo;s necks and suck their blood
passing on the zombie infection.</p>

<p>They are also fast and angry and they often do kung fu.  You can&rsquo;t
kill them of course, however you can put them to sleep if you write a spell on a
yellow piece of paper and put it on their forehead.  But if it falls off, they
wake up and get angry again.  Strangest of all is that they do little
hops like bunnies instead of walking.</p>

<p>I highly recommend Liao Yiwo&rsquo;s book, <a href="http://www.amazon.com/The-Corpse-Walker-Stories-Bottom/dp/0307388379/ref=sr_1_1?ie=UTF8&amp;qid=1362603639&amp;sr=8-1&amp;keywords=corpse+walker"><em>Corpse Walker,</em></a>
which tells the fascinating history and origin of Chinese zombies.  You can read more
about jiangshi on <a href="http://en.wikipedia.org/wiki/Jiangshi">Wikipedia</a>.  And of
course there are YouTube videos:</p>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/56Zvquhww80" frameborder="0" allowfullscreen></iframe>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dist::Zilla::PluginBundle::DAGOLDEN is pretty awesome]]></title>
    <link href="http://blog.kablamo.org/2013/02/20/how-to-learn-dist-zilla/"/>
    <updated>2013-02-20T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/02/20/how-to-learn-dist-zilla</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been using <a href="https://metacpan.org/module/Dist::Zilla">Dist::Zilla</a> for a
couple years.  It&rsquo;s a powerful way to automate CPAN releases.</p>

<p>But learning how to use it was not as easy as I hoped.</p>

<p>I remember when <code>Dist::Zilla</code> first debuted.  It was very exciting.  But I think
I may have drank too much of the cool aid becuase my expectations were very
high when I finally sat down to learn it.  I expected my experience to be
composed entirely of rainbows and puppy dog tails.</p>

<h2>Writing your own dist.ini or PluginBundle is hard</h2>

<p>Instead I found that creating a dist.ini or PluginBundle is fairly hard.  There
are a huge number of plugins and it&rsquo;s difficult for a newcomer to know which
are old, which are new, and how they work together.  If you look, for example,
at <code>Dist::Zilla::PluginBundle::DAGOLDEN</code> it uses 23 different plugins and the
<em>synopsis</em> is 132 lines long.</p>

<p>In retrospect, it was not reasonable to expect I could build something
comparable after a few minutes of perusing the docs.  It&rsquo;s more complex than
that.  So if you are looking to quickly add <code>Dist::Zilla</code> to your toolchain, you
need to use a PluginBundle and not write your own.</p>

<h2>How to quickly add Dist::Zilla to your toolchain</h2>

<p>One way is to just use <code>Dist::Zilla::PluginBundle::Basic</code>.  But this was not like
the promised land I had been dreaming of.  I wanted more.  So I kept looking.</p>

<p>Happily, there is a PluginBundle which I think works well as a reusable
component suitable for public consumption thats also very configurable.  I
doubt it&rsquo;s well known because the name sounds very personal.  That module is,
of course,
<a href="https://metacpan.org/module/Dist::Zilla::PluginBundle::DAGOLDEN">Dist::Zilla::PluginBundle::DAGOLDEN</a>.</p>

<p>I think the workflow it uses will work for many people.  Even if it
doesn&rsquo;t, reading the code is a great way to learn how to write your own
PluginBundle.  And because it&rsquo;s so comprehensive it&rsquo;s like having a up-to-date
map of the state of the art in <code>Dist::Zilla</code> plugins and how they work
together.</p>

<p>Here&rsquo;s what my dist.ini looks like:</p>

<pre><code>name    = App-Git-Ribbon
author  = Eric Johnson &lt;cpan at iijo dot nospamthanks dot org&gt;
license = Perl_5
copyright_holder = Eric Johnson
main_module = lib/App/Git/Ribbon.pm

[@DAGOLDEN]
no_spellcheck = 1
AutoMetaResources.bugtracker.rt = 0
AutoMetaResources.repository.github = user:kablamo
AutoMetaResources.bugtracker.github = user:kablamo
weaver_config = @FLORA
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CPAN release of App::Git::Ribbon, App::Git::Spark]]></title>
    <link href="http://blog.kablamo.org/2013/02/12/cpan-release-git-ribbon-git-spark/"/>
    <updated>2013-02-12T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/02/12/cpan-release-git-ribbon-git-spark</id>
    <content type="html"><![CDATA[<p>I packaged up these scripts and released them on CPAN to make them a little
easier to install and manage.</p>

<p><strong>App::Git::Ribbon</strong> <br>
on <a href="https://metacpan.org/module/App::Git::Ribbon">CPAN</a><br>
on <a href="https://github.com/kablamo/git-ribbon">GitHub</a><br>
previous <a href="http://blog.kablamo.org/git-ribbon">blog post</a></p>

<p><strong>App::Git::Spark</strong> <br>
on <a href="https://metacpan.org/module/App::Git::Spark">CPAN</a><br>
on <a href="https://github.com/kablamo/git-spark">GitHub</a><br>
previous <a href="http://blog.kablamo.org/git-spark-revisited">blog post</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[git-ribbon]]></title>
    <link href="http://blog.kablamo.org/2013/02/02/git-ribbon/"/>
    <updated>2013-02-02T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/02/02/git-ribbon</id>
    <content type="html"><![CDATA[<p>I wrote a little Perl script called
<a href="https://github.com/kablamo/git-ribbon">git-ribbon</a> to help me review the
latest changes in a git repository.</p>

<p>The way I used to review changes was by reading through the <code>git log</code>.  I try
to do this every morning at work to keep up with whats going on.  But I was
having a few problems:</p>

<ol>
<li>Its hard to know exactly which changes are new.</li>
<li>I want to review commits in the order they happened (instead of most recent first).</li>
<li><code>git log</code> diff output can be hard to read and may not have enough context
&mdash; sometimes I want a side by side diff like I get from <code>vimdiff</code> or <code>git
difftool</code>.</li>
</ol>


<p>Basically I wanted a quick and easy way to review the latest changes in a way
that feels a little more like an RSS feed.  So I wrote this script.</p>

<h2>How to use git-ribbon</h2>

<p><strong>First</strong> mark your current place in the commit history.  This command will
place a tag named _ribbon at origin/master.  Basically its a bookmark at your
current location.</p>

<pre><code>⚡ git ribbon --save
</code></pre>

<p><strong>Next</strong>, pull the latest changes made by your fellow conspirators from the
remote repository.</p>

<pre><code>⚡ git pull
</code></pre>

<p><strong>Then</strong> use <code>git ribbon</code> to review only the changes that have occurred since _ribbon:</p>

<pre><code>⚡ git ribbon
Eric Johnson 6 weeks ago ecf43db
Css tweaks.
root/html/calculator/realCost.tt

press 's' to skip 

Eric Johnson 4 weeks ago 9595fa0
fix css margin class.
root/css/networth.css
root/css/style.less
root/css/style.less.old
root/html/calculator/realCost.tt
root/html/fi.tt

press 's' to skip 

Eric Johnson 2 weeks ago 5ef0fb2
Added daysPerYear.
lib/Networth/Controller/Calculator.pm
lib/Networth/Out/RealCost.pm
root/html/calculator/realCost.tt

press 's' to skip 
</code></pre>

<p>The script will pause and wait for input when it prints <code>press 's' to skip</code>.
If you type anything other than <code>s</code>, it will show you the side by side diff
using <code>git difftool</code>.</p>

<p><a href="http://farm9.staticflickr.com/8107/8457314152_7f8b3c955c_b.jpg" title="click to view large version"><img src="http://farm9.staticflickr.com/8107/8457314152_7f8b3c955c.jpg" width="500" height="201" alt="vimdiff"></a></p>

<p>After you have reviewed all the changes, be sure to mark your place again so
its ready to go next time you want to do a pull:</p>

<pre><code>git ribbon --save
</code></pre>

<h2>Bonus tips</h2>

<p>In your .gitconfig try this:</p>

<pre><code>[diff]
    tool = vimdiff
</code></pre>

<p>The default colors for vimdiff look like they were created by strange clowns so
try this instead:</p>

<pre><code>⚡ mkdir -p ~/.vim/colors/
⚡ wget https://github.com/kablamo/dotfiles/blob/master/links/.vim/colors/iijo.vim -O ~/.vim/colors/iijo.vim
⚡ echo "colorscheme iijo" &gt;&gt; ~/.vimrc
</code></pre>

<p>Then learn to use vimdiff:</p>

<ul>
<li>To switch windows type <code>ctl-w l</code> and <code>ctl-w h</code>.
For more help type <code>:help window-move-cursor</code>.</li>
<li>To open and close folds type <code>zo</code> and <code>zc</code>.
For more help type <code>:help fold-commands</code>.</li>
<li>To close vimdiff with less typing try <code>ZZ</code>.</li>
</ul>


<h2>Alternatives to vimdiff</h2>

<p>If you don&rsquo;t want to invest the time just yet to learn vim, use an alternative like meld, opendiff,
p4merge, xxdiff, etc.  Side by side diffs are worth it!</p>

<h2>See also</h2>

<p>This script was inspired by a great <a href="http://gitready.com/advanced/2011/10/21/ribbon-and-catchup-reading-new-commits.html">blog
post</a>
on gitready.com which has a number of awesome git tricks for both beginners and
advanced users.</p>

<p>I also ended up writing a <a href="https://github.com/kablamo/vim-ribbon">vim plugin</a>
that is probably better user experience if you very comfortable in vim.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Whats in your $PERL5LIB?]]></title>
    <link href="http://blog.kablamo.org/2013/01/29/whats-in-your-perl5lib/"/>
    <updated>2013-01-29T00:00:00+08:00</updated>
    <id>http://blog.kablamo.org/2013/01/29/whats-in-your-perl5lib</id>
    <content type="html"><![CDATA[<p>Ever wonder whats in your $PERL5LIB?  Here is one way to find out:</p>

<pre><code>⚡ echo $PERL5LIB
.:./lib:/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/perl5:/home/eri
c/perl5/perlbrew/perls/perl-5.16.2/lib/perl5/i686-linux:/home/eric/perl
5/perlbrew/perls/perl-5.16.2/lib/perl5/i686-linux-gnu-thread-multi-64in
t:/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/site_perl:/home/eric/
perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2
</code></pre>

<p>My human eyeballs are not equipped to parse that.  Unhelpful.  So I put this in
my .bashrc:</p>

<pre><code>alias perl5lib='perl -E "say join \"\n\", split \":\", \$ENV{PERL5LIB}"'
</code></pre>

<p>Here it is in action:</p>

<pre><code>⚡ perl5lib
.
./lib
/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/perl5
/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/perl5/i686-linux
/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/perl5/i686-linux-gnu-thread-multi-64int
/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/site_perl
/home/eric/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2
</code></pre>

<p>Better.</p>
]]></content>
  </entry>
  
</feed>
