<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Instant answers are those little boxes at the top of the DuckDuckGo search results page. I made one for discovering international calling codes &amp;ndash; or dialing codes if you prefer.
If you want to hack on DuckDuckGo and add your own instant answer its pretty simple to get started. You can use Vagrant and VirtualBox to get a complete working dev environment. But if you are already running Ubuntu or OSX the following recipe is easier:" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="http://blog.kablamo.org/articles/duckduckgo/" />


    <title>
        
            How to build a Duck Duck Go instant answer :: Kablamo 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.3a991588b2c31ade5a9c741d2f03bbb65d0bdcabec2388ba9f061f66b870129f.css">




    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">



<meta itemprop="name" content="How to build a Duck Duck Go instant answer">
<meta itemprop="description" content="Instant answers are those little boxes at the top of the DuckDuckGo search results page. I made one for discovering international calling codes &ndash; or dialing codes if you prefer.
If you want to hack on DuckDuckGo and add your own instant answer its pretty simple to get started. You can use Vagrant and VirtualBox to get a complete working dev environment. But if you are already running Ubuntu or OSX the following recipe is easier:">
<meta itemprop="datePublished" content="2014-02-28T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2014-02-28T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="382">
<meta itemprop="image" content="http://blog.kablamo.org/"/>



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://blog.kablamo.org/"/>

<meta name="twitter:title" content="How to build a Duck Duck Go instant answer"/>
<meta name="twitter:description" content="Instant answers are those little boxes at the top of the DuckDuckGo search results page. I made one for discovering international calling codes &ndash; or dialing codes if you prefer.
If you want to hack on DuckDuckGo and add your own instant answer its pretty simple to get started. You can use Vagrant and VirtualBox to get a complete working dev environment. But if you are already running Ubuntu or OSX the following recipe is easier:"/>



    <meta property="og:title" content="How to build a Duck Duck Go instant answer" />
<meta property="og:description" content="Instant answers are those little boxes at the top of the DuckDuckGo search results page. I made one for discovering international calling codes &ndash; or dialing codes if you prefer.
If you want to hack on DuckDuckGo and add your own instant answer its pretty simple to get started. You can use Vagrant and VirtualBox to get a complete working dev environment. But if you are already running Ubuntu or OSX the following recipe is easier:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.kablamo.org/articles/duckduckgo/" />
<meta property="og:image" content="http://blog.kablamo.org/"/>
<meta property="article:published_time" content="2014-02-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2014-02-28T00:00:00+00:00" /><meta property="og:site_name" content="Kablamo" />




    <meta property="article:section" content="[perl duckduckgo]" />



    <meta property="article:published_time" content="2014-02-28 00:00:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__text">kablamo</span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="http://blog.kablamo.org/about">About</a></li><li><a href="http://blog.kablamo.org/books">Book Recommendations</a></li><li><a href="http://blog.kablamo.org/financial-independence">Financial Independence</a></li><li><a href="http://blog.kablamo.org/retrospectives">Retrospectives</a></li><li><a href="http://blog.kablamo.org/talks">Talks</a></li>
    </ul>
</nav>

            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">
        <h2 class="single-post-title"><a href="http://blog.kablamo.org/articles/duckduckgo/">How to build a Duck Duck Go instant answer</a></h2>

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>2 minutes</p>
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>382 Words</p>
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2014-02-27 19:00 -0500</p>

            
            </p>
        </div>

        <article>

            

            <div class="post-content">
                <p>Instant answers are those little boxes at the top of the DuckDuckGo search
results page.  I made one for discovering international calling codes &ndash; or
dialing codes if you prefer.</p>
<p><img src="/images/for-posts/2014-02-28-singapore.png" alt="x">
<img src="/images/for-posts/2014-02-28-down-under.png" alt="x"></p>
<p>If you want to hack on DuckDuckGo and add your own instant answer its pretty
simple to <a href="http://duckduckhack.com">get started</a>.  You can use Vagrant and
VirtualBox to get a complete working dev environment.  But if you are already
running Ubuntu or OSX the following recipe is easier:</p>
<pre><code>curl http://duckpan.org/install.pl | perl 
cpanm App::DuckPAN
duckpan installdeps # installs dependencies from DuckPAN (not CPAN) to locallib
</code></pre>
<p>Next fork the repository you want to hack on.  To choose the correct repository
think about what kind of data source you are using to generate your instant answer.</p>
<ul>
<li>Fork the <a href="https://github.com/duckduckgo/zeroclickinfo-spice">spice repo</a>
if you have a real time data source like a JSON web API.</li>
<li>Fork the <a href="https://github.com/duckduckgo/zeroclickinfo-goodie">goodie repo</a>
if you generate your instant answer with code and need no network access.</li>
<li>Fork the <a href="https://github.com/duckduckgo/zeroclickinfo-fathead">fathead repo</a>
if your data source can be placed in a key/value store.</li>
<li>Fork the <a href="https://github.com/duckduckgo/zeroclickinfo-fathead">longtail repo</a>
if your data source requires a full text search.</li>
</ul>
<p>Now you can start hacking.  I&rsquo;ll show you how the capitalization instant answer
from the goodie repo works.  Below is the code.  I added comments to explain
things a bit.</p>
<pre><code>package DDG::Goodie::Capitalize;
use DDG::Goodie;

# If a DuckDuckGo search query contains any of these words at the start or
# end of the query, the 'remainder' handler below will run.
triggers startend =&gt; 'capitalize', 'uppercase', 'upper case';

# This block of code is pretty much meta data describing this instant
# answer.  Mostly it is used by https://duckduckgo.com/goodies.
zci answer_type =&gt; &quot;capitalize&quot;;
primary_example_queries 'capitalize this';
secondary_example_queries 'uppercase that';
description 'capitalize a string';
name 'Capitalize';
code_url 'https://github.com/duckduckgo/zeroclickinfo-goodies/blob/master/lib/DDG/Goodie/Capitalize.pm';
category 'conversions';
topics 'programming';
attribution twitter =&gt; 'crazedpsyc',
            cpan    =&gt; 'CRZEDPSYC' ;

# This is is where the magic happens.  $_ contains the query minus the
# trigger word.  The return value from this sub shows up on the DuckDuckGo
# search results page as an instant answer.
handle remainder =&gt; sub { uc ($_) };
</code></pre>
<p>To test your new instant answer you can launch a little web server with the following command:</p>
<pre><code>duckpan server
</code></pre>
<p>Then open your favorite web browser and surf to
http://0:5000/?q=capitalize+aliens+smell+better+than+dinosaurs and you should
see something like this:</p>
<p><img src="/images/for-posts/2014-02-28-capitalize.png" alt="x"></p>

            </div>
        </article>

        <div class="post-info">
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other articles</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="http://blog.kablamo.org/articles/interview-questions/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Questions I ask in interviews</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="http://blog.kablamo.org/articles/no-dessert-forever/">
                                <span class="button__text">An experiment - No dessert forever</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
    </main>

            </div>

            
                
            
        </div>

        




<script type="text/javascript" src="/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
